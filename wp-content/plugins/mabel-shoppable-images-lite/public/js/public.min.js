var SIWCPublic;!function(t){var i=function(){function t(t){var i=this;t.find(".mabel-siwc-img-wrapper").each(function(t,a){var e=jQuery(a),s=e.data("sw-icon"),n=e.data("sw-tags"),o=e.data("sw-text"),r=e.data("sw-size"),c='<div class="mb-siwc-popup-inner"><div class="siwc-thumb-wrapper"></div><div class="siwc-inner-text"><h1></h1><h2></h2><a target="_blank" href="#">'+o+"</a></div></div>";n.forEach(function(t,a){var n=(jQuery('<span class="mb-siwc-tag"><i class="'+s+'"></i></span>').css({top:t.posY+"%",left:t.posX+"%"}).on("click",function(t){t.preventDefault();var i=jQuery(t.currentTarget),a=e.find(".mb-siwc-tag");i.toggleClass("active"),a.not(i).removeClass("active"),a.not(i).next().addClass("mabel-invisible"),i.next().toggleClass("mabel-invisible")}).appendTo(e),jQuery(c));t.thumb&&n.find(".siwc-thumb-wrapper").css("backgroundImage","url("+t.thumb+")"),n.find("h1").html(t.title),n.find("h2").html(t.price),n.find("a").attr("href",t.link);var o=jQuery('<div class="mb-siwc-popup mabel-invisible">');t.thumb||o.addClass("siwc-no-thumb"),o.append(n).appendTo(e).css({top:t.posY+"%",left:t.posX+"%",marginLeft:-o.width()/2,marginTop:r/2+15});var p=i.getPopupPosition(t.posX,t.posY,o,e);if("bottom"!=p)switch(p){case"top":o.css("marginTop",-1*(o.height()+15+r/2));break;case"top left":o.css({marginTop:-1*(o.height()-10),marginLeft:-1*(o.width()+15+r/2)});break;case"top right":o.css({marginTop:-1*(o.height()-10),marginLeft:r/2+15});break;case"bottom left":o.css({marginTop:-10,marginLeft:-1*(o.width()+15+r/2)});break;case"bottom right":o.css({marginTop:-10,marginLeft:r/2+15})}o.addClass("mb-siwc-"+p.replace(" ","-"))})})}return t.prototype.getPopupPosition=function(t,i,a,e){void 0===e&&(e=null),null==e&&(e=jQuery(document.body));var s=a.height(),n=a.width(),o=e.height(),r=e.width(),c=s/o*100,p=n/r*100,l=i+c>100,d=t-p<0,u=t+p>100,h=l?"top":"bottom";return d&&(h+=" right"),u&&(h+=" left"),h},t}();t.Main=i}(SIWCPublic||(SIWCPublic={})),window.addEventListener("load",function(){new SIWCPublic.Main(jQuery(document.body))});