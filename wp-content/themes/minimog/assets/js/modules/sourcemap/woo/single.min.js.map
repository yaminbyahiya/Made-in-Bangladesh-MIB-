{"version":3,"sources":["single.js"],"names":["$","$body","Helpers","window","minimog","swatchesSelected","evt","attr","term","title","$thisTerm","$termRow","parents","first","hasClass","find","html","document","ready","lightGallery","fn","$sliderWrap","removeData","LightGallery","$stickyBar","$cartForm","offsetTop","barHeight","ACTIVE_CLASS","$commentForm","options","$tabPanel","$currentProduct","min","max","duration","$counter","$wrap","length","$minimog","isSingle","postType","$minimogProductSingle","featureStyle","thumbsSlider","MinimogSwiper","thumbs","swiper","autoScrollOffset","children","on","singleProductStickyBar","$addToCartBtn","offset","top","outerHeight","css","preventDefault","addClass","this","scrollTop","removeClass","body","animate","closest","trigger","$attachmentButton","fileName","files","i18n","filesSelected","replace","target","value","split","pop","text","_download","light_gallery_download","_autoPlay","light_gallery_auto_play","_zoom","light_gallery_zoom","_fullScreen","light_gallery_full_screen","_share","light_gallery_share","selector","mode","thumbnail","light_gallery_thumbnail","download","autoplay","zoom","share","fullScreen","hash","animateThumb","showThumbByDefault","getCaptionFromTitleOrAlt","each","$readmore","Readmore","moreLink","readMore","lessLink","readLess","afterToggle","element","expanded","MinimogTabPanel","$variationsForm","siblings","$select","attributeName","attributeValue","val","perfectScrollbar","isHandheld","suppressScrollY","useBothWheelAxes","pid","postID","cookieName","oldIDs","getCookie","viewedStr","viewed","i","splice","unshift","slice","join","setCookie","data","parseInt","setInterval","randomInteger","chartTable","$toggleButton","$checkbox","isCheck","toggleClass","prop","$product","pID","isChecked","$productImageAdd","$modal","extend","sense","responsive","plugins","append","MinimogModal","dynamic","afterInit","modal","$modalContent","$el","$spinObject","spritespin","jQuery"],"mappings":"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","file":"../../../woo/single.min.js","sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\tvar $body = $( 'body' );\n\n\t\tvar Helpers = window.minimog.Helpers;\n\n\t\t$( document ).ready( function() {\n\t\t\tinitProductImagesFeatures();\n\t\t\tinitSingleStickyAddToCartForm();\n\n\t\t\tcommentAttachmentUploadHandler();\n\t\t\tcommentAttachmentGalleryInit();\n\t\t\tcommentTextCollapsible();\n\t\t\tfixProductBoughtTogether();\n\t\t\tsetProductViewed();\n\t\t\tliveViewsVisitors();\n\t\t\tinitSizeChart();\n\n\t\t\t$body.on( 'isw_selected', swatchesSelected );\n\n\t\t\t$( '.minimog-tabs' ).MinimogTabPanel();\n\n\t\t\t$( document.body ).on( 'click', '.woobt-add-btn', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tvar ACTIVE_CLASS  = 'checked',\n\t\t\t\t    $toggleButton = $( this ),\n\t\t\t\t    pid           = $toggleButton.attr( 'data-pid' ),\n\t\t\t\t    $product      = $toggleButton.parents( '.woobt-images' ).siblings( '.woobt-products' ).find( '.woobt-product[data-pid=\"' + pid + '\"]' ),\n\t\t\t\t    $checkbox     = $product.find( '.woobt-checkbox' ),\n\t\t\t\t    isCheck       = $toggleButton.hasClass( ACTIVE_CLASS );\n\n\t\t\t\t$toggleButton.toggleClass( ACTIVE_CLASS );\n\t\t\t\t$checkbox.prop( 'checked', ! isCheck );\n\t\t\t\t$checkbox.trigger( 'change' );\n\t\t\t} );\n\n\t\t\t$( document.body ).on( 'change', '.woobt-layout-separate .woobt-checkbox', function() {\n\t\t\t\tvar $checkbox        = $( this ),\n\t\t\t\t    $product         = $checkbox.closest( '.woobt-product' ),\n\t\t\t\t    pID              = $product.data( 'pid' ),\n\t\t\t\t    isChecked        = $checkbox.prop( 'checked' ),\n\t\t\t\t    $productImageAdd = $product.parents( '.woobt-products' ).siblings( '.woobt-images' ).find( '.woobt-image-' + pID ).find( '.woobt-add-btn' );\n\n\t\t\t\tisChecked ? $productImageAdd.addClass( 'checked' ) : $productImageAdd.removeClass( 'checked' );\n\t\t\t} );\n\n\t\t\tinitProduct360();\n\t\t} );\n\n\t\tfunction initSizeChart() {\n\t\t\t// Size Chart Table.\n\t\t\tvar chartTable = $( '.minimog-size-guide__table-wrapper' );\n\t\t\tif ( $.fn.perfectScrollbar && chartTable.length > 0 ) {\n\t\t\t\tchartTable.perfectScrollbar( {\n\t\t\t\t\tsuppressScrollY: true,\n\t\t\t\t\tuseBothWheelAxes: true,\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tfunction initProduct360() {\n\t\t\t$( document.body ).on( 'click', '.btn-open-product-360', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tvar $modal  = $( '<div id=\"modal-product-360\"></div>' ),\n\t\t\t\t    options = $.extend( {}, {\n\t\t\t\t\t    sense: - 1,\n\t\t\t\t\t    responsive: true,\n\t\t\t\t\t    animate: false,\n\t\t\t\t\t    plugins: [\n\t\t\t\t\t\t    '360', // Required.\n\t\t\t\t\t\t    'wheel',\n\t\t\t\t\t\t    'drag'\n\t\t\t\t\t    ]\n\t\t\t\t    }, $( this ).data( 'spritespin-settings' ) );\n\n\t\t\t\t$body.append( $modal );\n\n\t\t\t\t$modal.MinimogModal( {\n\t\t\t\t\tdynamic: true,\n\t\t\t\t\tafterInit: function( modal ) {\n\t\t\t\t\t\tvar $modalContent = modal.$el.find( '.modal-content-inner' ),\n\t\t\t\t\t\t    $spinObject   = $( '<div id=\"product-360-spritespin\"></div>' );\n\t\t\t\t\t\t$modalContent.append( $spinObject );\n\t\t\t\t\t\t$spinObject.spritespin( options );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\t\t}\n\n\t\tfunction fixProductBoughtTogether() {\n\t\t\tvar $variationsForm     = $( '#woo-single-info .entry-summary > .variations_form' ),\n\t\t\t    $frequentlyProducts = $variationsForm.siblings( '.woobt-wrap' ),\n\t\t\t    $currentProduct     = $frequentlyProducts.find( '.woobt-product-this' );\n\n\t\t\t/**\n\t\t\t * Update Variations for This Product in Bought Together List.\n\t\t\t */\n\t\t\t$variationsForm.find( 'select' ).on( 'change', function() {\n\t\t\t\tvar $select        = $( this ),\n\t\t\t\t    attributeName  = $select.attr( 'name' ),\n\t\t\t\t    attributeValue = $select.val();\n\n\t\t\t\t$currentProduct.find( '.variations_form select[name=\"' + attributeName + '\"]' ).val( attributeValue ).trigger( 'change' );\n\t\t\t} );\n\n\t\t\tif ( $.fn.perfectScrollbar && ! Helpers.isHandheld() ) {\n\t\t\t\t$( '.woobt-products-wrap' ).perfectScrollbar( {\n\t\t\t\t\tsuppressScrollY: true,\n\t\t\t\t\tuseBothWheelAxes: true,\n\t\t\t\t} );\n\t\t\t}\n\t\t}\n\n\t\tfunction swatchesSelected( evt, attr, term, title, $thisTerm ) {\n\t\t\tvar $termRow = $thisTerm.parents( '.row-isw-swatch' ).first();\n\n\t\t\tif ( $termRow.hasClass( 'row-isw-swatch--isw_select' ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$termRow.find( '.selected-term-name' ).html( title );\n\t\t}\n\n\t\tfunction initProductImagesFeatures() {\n\t\t\t// Selector without parent to compatible Elementor Pro.\n\t\t\tvar $sliderWrap = $( '.woo-single-gallery' );\n\n\t\t\tif ( 0 >= $sliderWrap.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfunction slider() {\n\t\t\t\tif ( ! $minimog.isSingle || 'product' !== $minimog.postType ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ( $minimogProductSingle.featureStyle !== 'slider' && $minimogProductSingle.featureStyle !== 'slider-02' && $minimogProductSingle.featureStyle !== 'carousel' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar options = {};\n\t\t\t\tif ( $sliderWrap.hasClass( 'has-thumbs-slider' ) ) {\n\t\t\t\t\tvar thumbsSlider = $sliderWrap.find( '.minimog-thumbs-swiper' ).MinimogSwiper();\n\t\t\t\t\toptions = {\n\t\t\t\t\t\tthumbs: {\n\t\t\t\t\t\t\tswiper: thumbsSlider,\n\t\t\t\t\t\t\tautoScrollOffset: 1,\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\t$sliderWrap.children( '.minimog-main-swiper' ).MinimogSwiper( options );\n\t\t\t}\n\n\t\t\tfunction lightGallery() {\n\t\t\t\tif ( $.fn.lightGallery && $sliderWrap.hasClass( 'has-light-gallery' ) ) {\n\t\t\t\t\t$sliderWrap.removeData( 'lightGallery' ); // Destroy init before re-init.\n\t\t\t\t\t$sliderWrap.lightGallery( window.minimog.LightGallery );\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tslider();\n\t\t\t// Init Light Gallery after Swiper to make working loop mode.\n\t\t\tlightGallery();\n\n\t\t\t$sliderWrap.on( 'minimog_wc_gallery_init_light_gallery', lightGallery );\n\t\t}\n\n\t\tfunction initSingleStickyAddToCartForm() {\n\t\t\tif ( '1' !== $minimogProductSingle.singleProductStickyBar ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar $stickyBar = $( '#sticky-product-bar' );\n\n\t\t\tif ( 0 >= $stickyBar.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar $addToCartBtn = $( '.entry-product form.cart' ).find( '.single_add_to_cart_button' ),\n\t\t\t    $cartForm     = $( '.entry-product .entry-summary form.cart' ),\n\t\t\t    offsetTop     = $addToCartBtn.offset().top,\n\t\t\t    barHeight     = $stickyBar.outerHeight(),\n\t\t\t    ACTIVE_CLASS  = 'showing';\n\n\t\t\t$body.css( '--sticky-atc-bar-height', barHeight + 'px' );\n\n\t\t\t$stickyBar.on( 'click', '.sticky-product-bar-close', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\t$stickyBar.addClass( 'hide' );\n\t\t\t\t$body.css( '--sticky-atc-bar-height', 0 );\n\t\t\t} );\n\n\t\t\t$( window ).on( 'scroll', function() {\n\t\t\t\t$( this ).scrollTop() > offsetTop ? $stickyBar.addClass( ACTIVE_CLASS ) : $stickyBar.removeClass( ACTIVE_CLASS );\n\t\t\t} );\n\n\t\t\t$( document.body ).on( 'click', '.sticky-product-add_to_cart_button', function( evt ) {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tvar offset = $cartForm.offset().top - 132; // admin bar + header height + content spacing.\n\n\t\t\t\t$( 'html, body' ).animate( { scrollTop: offset }, 600 );\n\t\t\t} );\n\t\t}\n\n\t\tfunction commentAttachmentUploadHandler() {\n\t\t\tvar $commentForm = $( '#commentform' );\n\n\t\t\t$commentForm.on( 'click', '.comment-form__attachment-button', function() {\n\t\t\t\tvar $attachmentButton = $( this ).closest( '.comment-form' ).find( '.comment-form-attachment__input' );\n\t\t\t\t$attachmentButton.trigger( 'click' );\n\t\t\t} );\n\n\t\t\t$commentForm.on( 'change', '.comment-form-attachment__input', function( evt ) {\n\t\t\t\tvar $attachmentButton = $( this ).closest( '.comment-form' ).find( '.comment-form__attachment-button' );\n\n\t\t\t\tvar fileName = '';\n\n\t\t\t\tif ( this.files && this.files.length > 1 ) {\n\t\t\t\t\tfileName = $minimogProductSingle.i18n.filesSelected.replace( '{count}', this.files.length );\n\t\t\t\t} else {\n\t\t\t\t\tfileName = evt.target.value.split( '\\\\' ).pop();\n\t\t\t\t}\n\n\t\t\t\t$attachmentButton.find( '.button-text' ).text( fileName );\n\t\t\t} );\n\t\t}\n\n\t\tfunction commentAttachmentGalleryInit() {\n\t\t\tvar _download   = $minimog.light_gallery_download === '1',\n\t\t\t    _autoPlay   = $minimog.light_gallery_auto_play === '1',\n\t\t\t    _zoom       = $minimog.light_gallery_zoom === '1',\n\t\t\t    _fullScreen = $minimog.light_gallery_full_screen === '1',\n\t\t\t    _share      = $minimog.light_gallery_share === '1',\n\t\t\t    _thumbnail  = $minimog.light_gallery_thumbnail === '1';\n\n\t\t\tvar options = {\n\t\t\t\tselector: 'a',\n\t\t\t\tmode: 'lg-fade',\n\t\t\t\tthumbnail: _thumbnail,\n\t\t\t\tdownload: _download,\n\t\t\t\tautoplay: _autoPlay,\n\t\t\t\tzoom: _zoom,\n\t\t\t\tshare: _share,\n\t\t\t\tfullScreen: _fullScreen,\n\t\t\t\thash: false,\n\t\t\t\tanimateThumb: false,\n\t\t\t\tshowThumbByDefault: false,\n\t\t\t\tgetCaptionFromTitleOrAlt: false\n\t\t\t};\n\n\t\t\t$( '.dco-attachment-gallery' ).each( function() {\n\t\t\t\t$( this ).lightGallery( options );\n\t\t\t} );\n\t\t}\n\n\t\tfunction commentTextCollapsible() {\n\t\t\tvar $readmore = $( '.js-text-collapsible' ),\n\t\t\t    $tabPanel = $readmore.closest( '.minimog-tabs' );\n\n\t\t\tnew Readmore( $readmore, {\n\t\t\t\tmoreLink: '<a href=\"#\" class=\"btn btn-flat btn-small\">' + $minimogProductSingle.i18n.readMore + '</a>',\n\t\t\t\tlessLink: '<a href=\"#\" class=\"btn btn-flat btn-small\">' + $minimogProductSingle.i18n.readLess + '</a>',\n\t\t\t\tafterToggle: function( trigger, element, expanded ) {\n\t\t\t\t\tif ( $tabPanel.length > 0 ) {\n\t\t\t\t\t\t$tabPanel.MinimogTabPanel( 'updateLayout' );\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction setProductViewed() {\n\t\t\tif ( 'product' !== $minimog.postType ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar pid        = $minimog.postID,\n\t\t\t    cookieName = 'recent_viewed_products',\n\t\t\t    oldIDs     = Helpers.getCookie( cookieName ),\n\t\t\t    viewedStr  = pid;\n\n\t\t\tif ( oldIDs !== '' ) {\n\t\t\t\tvar viewed = oldIDs.split( ',' );\n\n\t\t\t\tfor ( var i = 0; i < viewed.length; i ++ ) {\n\t\t\t\t\twhile ( viewed[ i ] == pid ) {\n\t\t\t\t\t\tviewed.splice( i, 1 );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tviewed.unshift( pid );\n\n\t\t\t\t// Store max 20 items.\n\t\t\t\tif ( viewed.length > 20 ) {\n\t\t\t\t\tviewed.slice( 1, 20 );\n\t\t\t\t}\n\n\t\t\t\tviewedStr = viewed.join();\n\t\t\t}\n\n\t\t\tHelpers.setCookie( cookieName, viewedStr, 7 );\n\t\t}\n\n\t\tfunction liveViewsVisitors() {\n\t\t\tvar $wrap = $( '#live-viewing-visitors' );\n\n\t\t\tif ( 0 >= $wrap.length ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar { min, max, duration } = $wrap.data( 'settings' );\n\t\t\tvar $counter = $wrap.find( '.count' );\n\t\t\tmin = parseInt( min );\n\t\t\tmax = parseInt( max );\n\n\t\t\tsetInterval( function() {\n\t\t\t\t$counter.text( Helpers.randomInteger( min, max ) );\n\t\t\t}, duration );\n\t\t}\n\t}( jQuery )\n);\n"]}