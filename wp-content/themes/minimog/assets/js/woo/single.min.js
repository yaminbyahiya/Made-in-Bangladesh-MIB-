!function(k){"use strict";var S=k("body"),$=window.minimog.Helpers;function C(t,e,i,o,n){n=n.parents(".row-isw-swatch").first();n.hasClass("row-isw-swatch--isw_select")||n.find(".selected-term-name").html(o)}k(document).ready(function(){function t(){k.fn.lightGallery&&e.hasClass("has-light-gallery")&&(e.removeData("lightGallery"),e.lightGallery(window.minimog.LightGallery))}var e,i,o,n,a,l,r,s,c,m,d,g,u,h,p;if((e=k(".woo-single-gallery")).length<=0||(!$minimog.isSingle||"product"!==$minimog.postType||"slider"!==$minimogProductSingle.featureStyle&&"slider-02"!==$minimogProductSingle.featureStyle&&"carousel"!==$minimogProductSingle.featureStyle||(r={},e.hasClass("has-thumbs-slider")&&(a=e.find(".minimog-thumbs-swiper").MinimogSwiper(),r={thumbs:{swiper:a,autoScrollOffset:1}}),e.children(".minimog-main-swiper").MinimogSwiper(r)),t(),e.on("minimog_wc_gallery_init_light_gallery",t)),"1"!==$minimogProductSingle.singleProductStickyBar||(i=k("#sticky-product-bar")).length<=0||(a=k(".entry-product form.cart").find(".single_add_to_cart_button"),o=k(".entry-product .entry-summary form.cart"),n=a.offset().top,a=i.outerHeight(),l="showing",S.css("--sticky-atc-bar-height",a+"px"),i.on("click",".sticky-product-bar-close",function(t){t.preventDefault(),i.addClass("hide"),S.css("--sticky-atc-bar-height",0)}),k(window).on("scroll",function(){k(this).scrollTop()>n?i.addClass(l):i.removeClass(l)}),k(document.body).on("click",".sticky-product-add_to_cart_button",function(t){t.preventDefault();t=o.offset().top-132;k("html, body").animate({scrollTop:t},600)})),(r=k("#commentform")).on("click",".comment-form__attachment-button",function(){k(this).closest(".comment-form").find(".comment-form-attachment__input").trigger("click")}),r.on("change",".comment-form-attachment__input",function(t){var e=k(this).closest(".comment-form").find(".comment-form__attachment-button"),i="",i=this.files&&1<this.files.length?$minimogProductSingle.i18n.filesSelected.replace("{count}",this.files.length):t.target.value.split("\\").pop();e.find(".button-text").text(i)}),p="1"===$minimog.light_gallery_download,u="1"===$minimog.light_gallery_auto_play,b="1"===$minimog.light_gallery_zoom,y="1"===$minimog.light_gallery_full_screen,w="1"===$minimog.light_gallery_share,s={selector:"a",mode:"lg-fade",thumbnail:"1"===$minimog.light_gallery_thumbnail,download:p,autoplay:u,zoom:b,share:w,fullScreen:y,hash:!1,animateThumb:!1,showThumbByDefault:!1,getCaptionFromTitleOrAlt:!1},k(".dco-attachment-gallery").each(function(){k(this).lightGallery(s)}),p=k(".js-text-collapsible"),c=p.closest(".minimog-tabs"),new Readmore(p,{moreLink:'<a href="#" class="btn btn-flat btn-small">'+$minimogProductSingle.i18n.readMore+"</a>",lessLink:'<a href="#" class="btn btn-flat btn-small">'+$minimogProductSingle.i18n.readLess+"</a>",afterToggle:function(t,e,i){0<c.length&&c.MinimogTabPanel("updateLayout")}}),u=k("#woo-single-info .entry-summary > .variations_form"),m=u.siblings(".woobt-wrap").find(".woobt-product-this"),u.find("select").on("change",function(){var t=k(this),e=t.attr("name"),t=t.val();m.find('.variations_form select[name="'+e+'"]').val(t).trigger("change")}),k.fn.perfectScrollbar&&!$.isHandheld()&&k(".woobt-products-wrap").perfectScrollbar({suppressScrollY:!0,useBothWheelAxes:!0}),"product"===$minimog.postType){var f=$minimog.postID,b="recent_viewed_products",w=$.getCookie(b),y=f;if(""!==w){for(var _=w.split(","),v=0;v<_.length;v++)for(;_[v]==f;)_.splice(v,1);_.unshift(f),20<_.length&&_.slice(1,20),y=_.join()}$.setCookie(b,y,7)}(p=k("#live-viewing-visitors")).length<=0||({min:d,max:g,duration:u}=p.data("settings"),h=p.find(".count"),d=parseInt(d),g=parseInt(g),setInterval(function(){h.text($.randomInteger(d,g))},u)),w=k(".minimog-size-guide__table-wrapper"),k.fn.perfectScrollbar&&0<w.length&&w.perfectScrollbar({suppressScrollY:!0,useBothWheelAxes:!0}),S.on("isw_selected",C),k(".minimog-tabs").MinimogTabPanel(),k(document.body).on("click",".woobt-add-btn",function(t){t.preventDefault();var t="checked",e=k(this),i=e.attr("data-pid"),i=e.parents(".woobt-images").siblings(".woobt-products").find('.woobt-product[data-pid="'+i+'"]').find(".woobt-checkbox"),o=e.hasClass(t);e.toggleClass(t),i.prop("checked",!o),i.trigger("change")}),k(document.body).on("change",".woobt-layout-separate .woobt-checkbox",function(){var t=k(this),e=t.closest(".woobt-product"),i=e.data("pid"),t=t.prop("checked"),e=e.parents(".woobt-products").siblings(".woobt-images").find(".woobt-image-"+i).find(".woobt-add-btn");t?e.addClass("checked"):e.removeClass("checked")}),k(document.body).on("click",".btn-open-product-360",function(t){t.preventDefault();var t=k('<div id="modal-product-360"></div>'),i=k.extend({},{sense:-1,responsive:!0,animate:!1,plugins:["360","wheel","drag"]},k(this).data("spritespin-settings"));S.append(t),t.MinimogModal({dynamic:!0,afterInit:function(t){var t=t.$el.find(".modal-content-inner"),e=k('<div id="product-360-spritespin"></div>');t.append(e),e.spritespin(i)}})})})}(jQuery);